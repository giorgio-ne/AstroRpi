#!/bin/bash

apt-get update  # To get the latest package lists
apt-get install libssl-dev
apt-get install virtualenv -y # To install Virtualenv
apt-get install python3-pip -y # To install python3

JUPYTER_DIR=/home/pi/astropi-notebook
mkdir -p -v "${JUPYTER_DIR}" # To create the Jupyter home directoryy
chown pi: "${JUPYTER_DIR}" # Change directory ownership to pi user

touch "${JUPYTER_DIR}"/run-jupyter-notebook.sh # Create jupyter startup script
cat <<EOF >"${JUPYTER_DIR}"/run-jupyter-notebook.sh # Content of jupyter startup script
#!/bin/bash
source /home/pi/jupyter-env/bin/activate
jupyter notebook --ip 0.0.0.0 --port 9999 --no-browser
deactivate
EOF

chmod +x "${JUPYTER_DIR}"/run-jupyter-notebook.sh # Make jupyter startup script executable
chown pi: "${JUPYTER_DIR}"/run-jupyter-notebook.sh # Change ownership of jupyter startup script to pi user

VENV=/home/pi/jupyter-env
virtualenv -q -p python3 $VENV  # To create a python3 Virtualenv
$VENV//bin/activate 
$VENV/bin/pip install numpy -y 
$VENV/bin/pip install pytest -y 
$VENV/bin/pip install scipy -y 
$VENV/bin/pip install h5py -y 
$VENV/bin/pip install beautifulsoup4 -y 
$VENV/bin/pip install html5lib -y 
$VENV/bin/pip install bleach -y 
$VENV/bin/pip install pyyaml -y 
$VENV/bin/pip install pandas -y 
$VENV/bin/pip install bintrees -y 
$VENV/bin/pip install ortedcontainers -y 
$VENV/bin/pip install jplephem -y 
$VENV/bin/pip install matplotlib -y 
$VENV/bin/pip install scikit-image -y 
$VENV/bin/pip install setuptools -y 
$VENV/bin/pip install mpmath -y 
$VENV/bin/pip install asdf -y 
$VENV/bin/pip install bottleneck -y 
$VENV/bin/pip install astropy -y 
$VENV/bin/deactivate

